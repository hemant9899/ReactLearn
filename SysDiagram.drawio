<mxfile modified="2020-08-16T18:36:35.247Z" host="app.diagrams.net" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.125 Safari/537.36" etag="CdenCu5HWXSwbm5NrAwq" version="13.6.2" type="github" pages="2">
  <diagram id="Ht1M8jgEwFfnCIfOTk4-" name="Flow">
    <mxGraphModel dx="1019" dy="530" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="2339" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-1" value="&lt;h1&gt;&lt;u&gt;System Design Flow&lt;/u&gt;&lt;/h1&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="1" vertex="1">
          <mxGeometry x="1010" y="40" width="250" height="50" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-7" style="edgeStyle=orthogonalEdgeStyle;orthogonalLoop=1;jettySize=auto;html=1;curved=1;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-4" target="Jh1sc7k5TGZAMHPC5j6o-5" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-4" value="&lt;h1&gt;Overview&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Non-Functional&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Functional&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;HLD&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;LLD&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Bottleneck&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Cost, Security&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="60" y="30" width="180" height="150" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-8" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-5" target="Jh1sc7k5TGZAMHPC5j6o-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-5" value="&lt;h1&gt;Non-Functional (5-8 Min)&lt;/h1&gt;&lt;div&gt;(Features Expectations)&lt;/div&gt;&lt;ul&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;1. Use cases&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;2. Scenarios that will not be covered&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;3. Who will use&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;4. How many will use&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;5. Usage patterns: web, app, api&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;6. Latency&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;7. Availability&amp;nbsp;Tier 0,1,2&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="50" y="350" width="310" height="210" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-10" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-6" target="Jh1sc7k5TGZAMHPC5j6o-9" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-6" value="&lt;h1&gt;ESTIMATIONS (5-8 Min)&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;&lt;span&gt;Velocity&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;Users/day&lt;/li&gt;&lt;li&gt;request/user&lt;/li&gt;&lt;li&gt;request/day&lt;/li&gt;&lt;li&gt;request/sec&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;Volume&lt;/li&gt;&lt;ul&gt;&lt;li&gt;size/request&lt;/li&gt;&lt;li&gt;size/response&lt;/li&gt;&lt;li&gt;ingress bandwidth&lt;/li&gt;&lt;li&gt;egress bandwidth&lt;/li&gt;&lt;li&gt;storage requirement/day/year/5-year&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;Veracity (Types of data):&lt;/li&gt;&lt;ul&gt;&lt;li&gt;&amp;nbsp; &amp;nbsp;relational, non relational, colom wide, key-value, document&lt;/li&gt;&lt;li&gt;&amp;nbsp; &amp;nbsp;graph&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;Server QPS&lt;/li&gt;&lt;ul&gt;&lt;li&gt;total service time = wait time + process time&lt;/li&gt;&lt;li&gt;Threads = cores * (1+process/wait) * target_cpu_perc&lt;/li&gt;&lt;li&gt;QPS = threads/total&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="60" y="670" width="410" height="350" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-13" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-9" target="Jh1sc7k5TGZAMHPC5j6o-11" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-9" value="&lt;h1&gt;High-Level Design(5-10 Min)&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Focus on L0/L1 design&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Service layer:&lt;/font&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;API in play : as per features above&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Basic algorithm&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Persistence layer&amp;nbsp;&lt;/font&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;How to choose database? Ask questions:&lt;/font&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Dateset&amp;nbsp;&lt;i&gt;size&lt;/i&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Request/Transaction&amp;nbsp;&lt;i&gt;size&lt;/i&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Request &lt;i&gt;rate QPS&lt;/i&gt;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Update/Delete rate&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;Consistency : rate of propagation of CRUD in system&lt;/li&gt;&lt;li&gt;Availability : stale data is ok?&lt;/li&gt;&lt;li&gt;Computation per-request: Pre-computed, on-fly aggregation, Multiple sub-calls to diff. database types, fan-out, Denormalisation, materialized view.&lt;/li&gt;&lt;li&gt;Latency requirement: read-heavy or write-heavy&lt;/li&gt;&lt;ul&gt;&lt;li&gt;Email: one read per write&lt;/li&gt;&lt;li&gt;Catalog / social media: multiple read&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;Scalibility: CAP, Ingest speed, concurrency, cost, security&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Blob&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Relational&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Non-Relational&amp;nbsp;-&amp;nbsp;&lt;/font&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Document&amp;nbsp;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Column-wide&amp;nbsp;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Key-Value&amp;nbsp;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Graph&amp;nbsp;&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;CDN&lt;/font&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;static content&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Huge wall to backend&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Cache&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Queue/Batch/Stream&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="60" y="1130" width="480" height="500" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-14" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-11" target="Jh1sc7k5TGZAMHPC5j6o-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-11" value="&lt;h1&gt;Deep-Dive LLD (10-20 Min)&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;Scaling the algorithm&lt;/li&gt;&lt;li&gt;Scaling each component&lt;/li&gt;&lt;ul&gt;&lt;li&gt;Availability&lt;/li&gt;&lt;li&gt;Consistency&lt;/li&gt;&lt;li&gt;Latency/Throughput&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;Think from Journey :&lt;br&gt;&lt;ul&gt;&lt;li&gt;*First confirm if specific area/aspect to be discussed&lt;/li&gt;&lt;li&gt;write request&lt;/li&gt;&lt;li&gt;read request&lt;/li&gt;&lt;li&gt;event/batch process path&lt;br&gt;&lt;/li&gt;&lt;li&gt;maintenance path&lt;/li&gt;&lt;li&gt;analytics/cold storage path&lt;/li&gt;&lt;li&gt;notification path&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="600" y="180" width="410" height="270" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-17" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-12" target="Jh1sc7k5TGZAMHPC5j6o-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-12" value="&lt;h1&gt;Deep-Dive LLD (10-20 Min)&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;Scaling the algorithm&lt;/li&gt;&lt;li&gt;Scaling each component&lt;/li&gt;&lt;ul&gt;&lt;li&gt;Availability&lt;/li&gt;&lt;li&gt;Consistency&lt;/li&gt;&lt;li&gt;Latency/Throughput&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;Think from Journey :&lt;br&gt;&lt;ul&gt;&lt;li&gt;&lt;li&gt;write request&lt;/li&gt;&lt;li&gt;read request&lt;/li&gt;&lt;li&gt;event/batch process path&lt;br&gt;&lt;/li&gt;&lt;li&gt;maintenance path&lt;/li&gt;&lt;li&gt;analytics/cold storage path&lt;/li&gt;&lt;li&gt;notification path&lt;br&gt;&lt;/li&gt;&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="600" y="580" width="410" height="270" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-55" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-16" target="Jh1sc7k5TGZAMHPC5j6o-20" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-16" value="&lt;h1&gt;Cloud DNS&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Lookup DNS mapped to Load balancer static public IP&lt;/li&gt;&lt;li&gt;Cloud DNS translates requests for domain names like www.google.com into IP addresses like 74.125.29.101&lt;br&gt;&lt;/li&gt;&lt;li&gt;DNS forwarding : for hybrid cloud model&lt;br&gt;&lt;/li&gt;&lt;li&gt;Scalability and availability: 100% availability&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="645" y="970" width="320" height="180" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-27" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-18" target="Jh1sc7k5TGZAMHPC5j6o-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-18" value="&lt;h1&gt;Cloud CDN&lt;/h1&gt;&lt;div&gt;(edge caches, very high availability)&lt;br&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Push vs Pull model for content fill&lt;/li&gt;&lt;li&gt;Sources:&lt;/li&gt;&lt;ul&gt;&lt;li&gt;Instance group&lt;/li&gt;&lt;li&gt;Zone network endpoint groups(&lt;a href=&quot;https://cloud.google.com/load-balancing/docs/negs/zonal-neg-concepts&quot;&gt;NEGs&lt;/a&gt;)&lt;/li&gt;&lt;li&gt;Blob Storage&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;CDN links are created as blob is created&lt;/li&gt;&lt;ul&gt;&lt;li&gt;Upon request it can fetch the values/content from backend&lt;/li&gt;&lt;li&gt;Or pre-emptively put content in it&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;Can serve 100s of GB/second&lt;/li&gt;&lt;li&gt;Saves backend from heavy load/spikes&lt;/li&gt;&lt;li&gt;Best for Video/Images/HTML/Js/Css serving&lt;/li&gt;&lt;li&gt;Takes content closer to consumer&lt;/li&gt;&lt;li&gt;Cloud CDN works with HTTP(S) &lt;b&gt;load balancing&lt;/b&gt; to deliver content&amp;nbsp;&lt;/li&gt;&lt;li&gt;Cloud CDN doesn&#39;t perform any URL redirection (in case of cache miss)&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1075" y="176" width="320" height="330" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-57" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-20" target="Jh1sc7k5TGZAMHPC5j6o-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-20" value="&lt;h1&gt;Cloud Load-Balancing&lt;/h1&gt;&lt;div&gt;(100% available/scalable/ +1Million QPS)&lt;br&gt;&lt;/div&gt;&lt;div&gt;Distribute traffic to backend services&lt;/div&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://cloud.google.com/load-balancing/docs/choosing-load-balancer&quot;&gt;Layer 4&lt;/a&gt;: Internal&lt;/li&gt;&lt;ul&gt;&lt;li&gt;Internal IP&lt;/li&gt;&lt;li&gt;Https(s)&lt;/li&gt;&lt;li&gt;TCP/UDP , proxy&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;Layer 7: External&lt;br&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;App-content based LB&lt;/li&gt;&lt;li&gt;Http(s)&lt;/li&gt;&lt;li&gt;with header&lt;/li&gt;&lt;li&gt;SSL termination, URL&lt;/li&gt;&lt;li&gt;TCP/UDP, proxy&lt;/li&gt;&lt;li&gt;&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;Integration with&amp;nbsp;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;Cloud CDN for cached content delivery&lt;/li&gt;&lt;li&gt;Healthcheck&lt;/li&gt;&lt;li&gt;Affinity/Stickiness&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;Availability:&amp;nbsp;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;Active-Active&lt;/li&gt;&lt;li&gt;Active-Passive&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="630" y="1240" width="360" height="400" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-29" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=-0.021;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-25" target="Jh1sc7k5TGZAMHPC5j6o-28" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-56" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-25" target="Jh1sc7k5TGZAMHPC5j6o-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-25" value="&lt;h1&gt;Application Service-Layer&lt;/h1&gt;&lt;p&gt;This layer deals with core computation/processing of request.&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Contains business logic&lt;/li&gt;&lt;li&gt;Use business/data domain specific microservices.&lt;/li&gt;&lt;li&gt;Microservice mesh&lt;/li&gt;&lt;li&gt;Autoscaling : Instance group&lt;/li&gt;&lt;li&gt;Inter-microservice communication&lt;/li&gt;&lt;li&gt;Service to database/cache interaction&lt;/li&gt;&lt;li&gt;Resilience&lt;/li&gt;&lt;/ul&gt;&lt;br&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;glass=0;sketch=0;shadow=0;" parent="1" vertex="1">
          <mxGeometry x="1060" y="590" width="350" height="180" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-31" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-28" target="Jh1sc7k5TGZAMHPC5j6o-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-28" value="&lt;h1&gt;Infra, non-functional&lt;/h1&gt;&lt;p&gt;This layer deals with core computation/processing of request.&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Contains business logic&lt;/li&gt;&lt;li&gt;Use business/data domain specific microservices.&lt;/li&gt;&lt;li&gt;Microservice mesh&lt;/li&gt;&lt;li&gt;Autoscaling : Instance group&lt;/li&gt;&lt;li&gt;Inter-microservice communication&lt;/li&gt;&lt;li&gt;Service to database/cache interaction&lt;/li&gt;&lt;/ul&gt;:&lt;br&gt;&lt;ul&gt;&lt;li&gt;Dev-sec-ops&lt;/li&gt;&lt;li&gt;Service discovery&lt;/li&gt;&lt;li&gt;Actualtors&lt;/li&gt;&lt;li&gt;Logger&lt;/li&gt;&lt;li&gt;healthchecks&lt;/li&gt;&lt;li&gt;Security&lt;/li&gt;&lt;li&gt;Communication protocols/framework&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;glass=0;sketch=0;shadow=0;" parent="1" vertex="1">
          <mxGeometry x="1060" y="840" width="350" height="300" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-34" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-30" target="Jh1sc7k5TGZAMHPC5j6o-33" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-30" value="&lt;h1&gt;Communication protocols/serialization/ framework &lt;i style=&quot;font-size: 12px&quot;&gt;TBD&lt;/i&gt;&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;&lt;span&gt;Http, Https, Http/2&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;SSL&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;TCP&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;UDP&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;gRCP&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;WebSockets&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Thrift&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Protocol buffer&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Avro&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;SOAP/REST&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Json/Xml&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;glass=0;sketch=0;shadow=0;" parent="1" vertex="1">
          <mxGeometry x="1060" y="1200" width="350" height="280" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-32" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-30" target="Jh1sc7k5TGZAMHPC5j6o-30" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-52" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-33" target="Jh1sc7k5TGZAMHPC5j6o-36" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-33" value="&lt;h1&gt;Database&lt;/h1&gt;&lt;div&gt;(To SQL or NoSQL)&lt;br&gt;&lt;/div&gt;&lt;div&gt;Purpose of database is to provide persistence layer to system, to reliably write and read from it, durably.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;CAP Theorem&lt;/div&gt;&lt;p&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Consistency :&amp;nbsp;refers to linearizability or sequential consistency. Before and after, App also take case of this.&lt;/li&gt;&lt;li&gt;Availability : &lt;b&gt;Every &lt;/b&gt;read/write requests gets response/in time&lt;br&gt;&lt;/li&gt;&lt;li&gt;Partition Tolerant: system upholds consistency guarantees in spite of network partitions&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;How to choose Database?&lt;br&gt;What are criteria?&lt;br&gt;What are tradsoff (+among DB also)?&lt;br&gt;&lt;ul&gt;&lt;li&gt;RDBMS/NoSQL&lt;/li&gt;&lt;li&gt;OLTP/OLAP&lt;/li&gt;&lt;/ul&gt;&lt;span&gt;&lt;b&gt;Resilience&lt;/b&gt;&lt;/span&gt;&lt;br&gt;Distributed&amp;nbsp;&lt;br&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1460" y="170" width="320" height="390" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-46" value="" style="group" parent="1" vertex="1" connectable="0">
          <mxGeometry x="1470" y="650" width="435" height="350" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-36" value="" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="Jh1sc7k5TGZAMHPC5j6o-46" vertex="1">
          <mxGeometry width="435" height="350" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-35" value="" style="triangle;whiteSpace=wrap;html=1;rounded=0;shadow=0;glass=0;sketch=0;rotation=-90;" parent="Jh1sc7k5TGZAMHPC5j6o-46" vertex="1">
          <mxGeometry x="155" y="85" width="110" height="180" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-40" value="&lt;font style=&quot;font-size: 8px&quot;&gt;RDBMS&lt;br&gt;&lt;/font&gt;&lt;ul style=&quot;font-size: 8px&quot;&gt;&lt;li&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;MySQL&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;Oracle&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;font style=&quot;font-size: 8px&quot;&gt;Postgress&lt;/font&gt;&lt;/li&gt;&lt;/ul&gt;" style="text;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;glass=0;sketch=0;" parent="Jh1sc7k5TGZAMHPC5j6o-46" vertex="1">
          <mxGeometry x="165" y="240" width="117.5" height="80" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-41" value="&lt;span style=&quot;font-size: 8px&quot;&gt;CouchDB (Doc)&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;CassandraDB(&lt;a href=&quot;https://www.omnisci.com/technical-glossary/columnar-database#:~:text=A%20columnar%20database%20is%20preferred,cost%20hardware%20to%20increase%20throughput.&quot;&gt;Col&lt;/a&gt;)&lt;br&gt;&lt;ul&gt;&lt;li&gt;Good read, analytics&lt;/li&gt;&lt;li&gt;Leaderless&lt;/li&gt;&lt;li&gt;Gossip/Consitant Hash&lt;/li&gt;&lt;li&gt;Scales linearly&lt;/li&gt;&lt;li&gt;Click/event stream&lt;/li&gt;&lt;/ul&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;DynamoDB (KV)&lt;/span&gt;" style="text;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;glass=0;sketch=0;" parent="Jh1sc7k5TGZAMHPC5j6o-46" vertex="1">
          <mxGeometry x="17.5" y="20" width="147.5" height="140" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-42" value="&lt;span style=&quot;font-size: 8px&quot;&gt;MongoDB (Doc)&lt;/span&gt;&lt;br&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;BigTableDB, Hbase (Col)&lt;br&gt;&lt;ul&gt;&lt;li&gt;Good write, analytics&lt;/li&gt;&lt;li&gt;Leaderless&lt;/li&gt;&lt;li&gt;Scales linearly&lt;/li&gt;&lt;li&gt;Click/event stream&lt;/li&gt;&lt;/ul&gt;&lt;/span&gt;&lt;span style=&quot;font-size: 8px&quot;&gt;Redis, Memcache (KV)&lt;/span&gt;" style="text;html=1;strokeColor=#6c8ebf;fillColor=#dae8fc;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;glass=0;sketch=0;" parent="Jh1sc7k5TGZAMHPC5j6o-46" vertex="1">
          <mxGeometry x="275" y="30" width="147.5" height="140" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-39" value="C" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;glass=0;sketch=0;" parent="Jh1sc7k5TGZAMHPC5j6o-46" vertex="1">
          <mxGeometry x="270" y="230" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-38" value="A" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;glass=0;sketch=0;" parent="Jh1sc7k5TGZAMHPC5j6o-46" vertex="1">
          <mxGeometry x="90" y="230" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-37" value="P" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;shadow=0;glass=0;sketch=0;" parent="Jh1sc7k5TGZAMHPC5j6o-46" vertex="1">
          <mxGeometry x="185" y="100" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-51" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-47" target="Jh1sc7k5TGZAMHPC5j6o-50" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-47" value="&lt;h1&gt;Caches&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Client caching&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;CDN caching&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Web server caching&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Database caching&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Application caching&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Cache @Query level&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Cache @Object level&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;L1&amp;nbsp;&lt;/span&gt;cache : per session&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;L2 cache : cross session&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Datatype:&amp;nbsp;&lt;/span&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Redis: KV only, single thread&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Memcache: Multi-dataset, set, LL, hm&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Both are scalable&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;h3&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Eviction policies:&lt;/span&gt;&lt;/h3&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Least Recently Used(&lt;b&gt;LRU&lt;/b&gt;)&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Least Frequently Used(LFU)&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;First in First Out (FIFO)&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;h3&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Cache Loading Policies:&lt;/span&gt;&lt;/h3&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;&lt;b&gt;Write through&lt;/b&gt; : write in cache, read-after-write, doesn&#39;t make available&amp;nbsp;until confirmed from persistence&amp;nbsp;db.&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;&lt;b&gt;Write behind&lt;/b&gt; : write in database and invalidate cache&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Cache aside&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Refresh ahead&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;glass=0;sketch=0;shadow=0;" parent="1" vertex="1">
          <mxGeometry x="1512.5" y="1090" width="350" height="480" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-48" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-36" target="Jh1sc7k5TGZAMHPC5j6o-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-49" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-47" target="Jh1sc7k5TGZAMHPC5j6o-47" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-54" style="edgeStyle=orthogonalEdgeStyle;curved=1;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="Jh1sc7k5TGZAMHPC5j6o-50" target="Jh1sc7k5TGZAMHPC5j6o-53" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-50" value="&lt;h1&gt;&lt;span style=&quot;font-size: 24px&quot;&gt;Asynchronicity&lt;/span&gt;&lt;br&gt;&lt;/h1&gt;&lt;h1&gt;&lt;span style=&quot;font-size: 12px ; font-weight: normal&quot;&gt;(Decoupled services, deal with it when it has time/resources)&lt;/span&gt;&lt;br&gt;&lt;/h1&gt;&lt;div&gt;&lt;/div&gt;...&lt;br&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Distributed Message queues&lt;/span&gt;&lt;span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Task queues&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Backpressure&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;SAGA&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Event sourcing&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Dead letter queue&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="2030" y="176" width="381" height="244" as="geometry" />
        </mxCell>
        <mxCell id="Jh1sc7k5TGZAMHPC5j6o-53" value="&lt;h1&gt;&lt;span style=&quot;font-size: 24px&quot;&gt;Bottlenecks&lt;/span&gt;&lt;br&gt;&lt;/h1&gt;&lt;h1&gt;&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Cost&lt;/span&gt;&lt;span&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Network&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Security&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Hybrid model&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="2030" y="470" width="381" height="150" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="9jHKcsUwmbnn1T6EnNXs" name="DataBase">
    <mxGraphModel dx="1019" dy="530" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="3300" pageHeight="2339" math="0" shadow="0">
      <root>
        <mxCell id="LPvS2a-wgWfW8XgeyqXS-0" />
        <mxCell id="LPvS2a-wgWfW8XgeyqXS-1" parent="LPvS2a-wgWfW8XgeyqXS-0" />
        <mxCell id="LPvS2a-wgWfW8XgeyqXS-3" value="&lt;h1&gt;&lt;u&gt;Database Decisions&lt;/u&gt;&lt;/h1&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="LPvS2a-wgWfW8XgeyqXS-1">
          <mxGeometry x="690" y="20" width="260" height="90" as="geometry" />
        </mxCell>
        <mxCell id="LhqcskTmSTPjoJuvtaBF-0" value="&lt;h1&gt;Question to discuss&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;&lt;font face=&quot;Verdana&quot;&gt;Persistence layer&amp;nbsp;&lt;/font&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;How to choose database? Ask questions:&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;ol&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;Dateset&amp;nbsp;&lt;/span&gt;&lt;i style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;size&lt;/i&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;Request/Transaction&amp;nbsp;&lt;/span&gt;&lt;i style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;size&lt;/i&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;Request &lt;/span&gt;&lt;i style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;rate QPS&lt;/i&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Update/Delete rate&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Consistency : rate of propagation of CRUD in system&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Availability : stale data is ok?&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Computation per-request: Pre-computed, on-fly aggregation, Multiple sub-calls to diff. database types, fan-out, Denormalisation, materialized view.&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Latency requirement: read-heavy or write-heavy&lt;/span&gt;&lt;/li&gt;&lt;ol&gt;&lt;li&gt;&lt;span&gt;Email: one read per write&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;&lt;span&gt;Catalog / social media: multiple read&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;li&gt;&lt;span&gt;&lt;span&gt;Scalibility: CAP, Ingest speed, concurrency, cost, security&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/ul&gt;&lt;br&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;Blob&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;Relational&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;Non-Relational&amp;nbsp;-&amp;nbsp;&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;Document&amp;nbsp;&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;Column-wide&amp;nbsp;&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;Key-Value&amp;nbsp;&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-family: &amp;#34;verdana&amp;#34;&quot;&gt;Graph&amp;nbsp;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="LPvS2a-wgWfW8XgeyqXS-1">
          <mxGeometry x="100" y="580" width="480" height="400" as="geometry" />
        </mxCell>
        <mxCell id="xLZQy-Xux8lEB82zGkl7-1" value="&lt;h3 style=&quot;text-align: center&quot;&gt;&lt;span&gt;Aurora&lt;/span&gt;&lt;/h3&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;&lt;b&gt;Space:&lt;/b&gt; Upto 64-TB autoscaling&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;&lt;b&gt;Availability&lt;/b&gt;&lt;/span&gt;&lt;b style=&quot;font-size: 12px&quot;&gt;:&lt;/b&gt;&lt;span style=&quot;font-size: 12px&quot;&gt; 15 Read-Replica&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;&lt;b&gt;Backups:&lt;/b&gt; Incremental backups in S3&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;6 Way replication in 3-AZ, (Region-&amp;gt;AZ(&amp;lt;5ms)), syncronusly&lt;br&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="LPvS2a-wgWfW8XgeyqXS-1">
          <mxGeometry x="1640" y="570" width="300" height="201" as="geometry" />
        </mxCell>
        <mxCell id="xLZQy-Xux8lEB82zGkl7-2" value="&lt;h3 style=&quot;text-align: center&quot;&gt;&lt;span&gt;Why NoSQL&lt;/span&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Why start with NoSQL:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;- If you really have large amount of data &amp;gt;5TB/year&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;- Data intensive workloads&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;- Super low-latency app&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;- Metadata-driven datasets&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;- Highly non-relational data&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;- Need scheem-less data structure&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;- Rapid ingestion (10k&amp;gt;writes/sec) in TB ranges&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;- Click stream, analytics data.&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;- Batch processing, map-reduce&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="LPvS2a-wgWfW8XgeyqXS-1">
          <mxGeometry x="1600" y="210" width="330" height="280" as="geometry" />
        </mxCell>
        <mxCell id="xLZQy-Xux8lEB82zGkl7-4" value="&lt;p style=&quot;line-height: 100%&quot;&gt;&lt;/p&gt;&lt;h3&gt;Super List&lt;/h3&gt;&lt;h1&gt;&lt;br style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;&lt;div style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;&lt;ul&gt;&lt;li&gt;Dateset size&lt;/li&gt;&lt;li&gt;Request/Transaction size&lt;/li&gt;&lt;li&gt;Request rate QPS&lt;/li&gt;&lt;li&gt;Update/Delete rate&lt;/li&gt;&lt;li&gt;Consistency : rate of propagation of CRUD in system&lt;/li&gt;&lt;li&gt;Availability : stale data is ok?&lt;/li&gt;&lt;li&gt;Computation per-request: Pre-computed, on-fly aggregation, Multiple sub-calls to diff. database types, fan-out, Denormalisation, materialized view.&lt;/li&gt;&lt;li&gt;Latency requirement: read-heavy or write-heavy&lt;/li&gt;&lt;li&gt;Email: one read per write&lt;/li&gt;&lt;li&gt;Catalog / social media: multiple read&lt;/li&gt;&lt;li&gt;Scalibility: Sharding, CAP, Ingest speed, concurrency, cost, security&lt;/li&gt;&lt;/ul&gt;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;Any Database system should have following features:&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;Backup and Restore&lt;br&gt;&lt;/li&gt;&lt;ul style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;&lt;li&gt;automated backups of your DB instance during the backup window of your DB instance&lt;br&gt;&lt;/li&gt;&lt;li&gt;Point in time recovery&lt;/li&gt;&lt;/ul&gt;&lt;li style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;Replication&lt;br&gt;&lt;/li&gt;&lt;ul style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;&lt;li&gt;Updates made to the source DB instance are asynchronously copied to the read replica&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;Scaling:&lt;/b&gt;&amp;nbsp;Divert ready traffic to scale reads&lt;/li&gt;&lt;li&gt;&lt;b&gt;Reduce load&amp;nbsp;&lt;/b&gt;on write&lt;/li&gt;&lt;li&gt;RR as disaster recovery, in Multi AZ/Region, using Transaction log tailing(maintained&amp;nbsp;for 2 hours in AMZ)&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;Sharding:&lt;/span&gt;&lt;/li&gt;&lt;ul style=&quot;line-height: 60%&quot;&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;Scalability (horizontal)&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;Fault&amp;nbsp;tolerance&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;line-height: 120%&quot;&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;routing logic residing at the application tier&lt;/span&gt;&lt;br&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;line-height: 120%&quot;&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;OLTP: writes are scaled beyond capacity of one instance&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;line-height: 120%&quot;&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;Drawback:&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;line-height: 120%&quot;&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;Joins are hard&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;line-height: 120%&quot;&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;OLAP is difficult&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;line-height: 120%&quot;&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;Adds latency&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;line-height: 120%&quot;&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;&lt;br&gt;&lt;/span&gt;&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;li style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;Failover&lt;br&gt;&lt;/li&gt;&lt;ul style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;&lt;li&gt;Multi-AZ deployments&lt;br&gt;&lt;/li&gt;&lt;li&gt;Database Mirroring&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;Resilience&lt;/li&gt;&lt;ul&gt;&lt;li style=&quot;font-size: 12px&quot;&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;True resiliency, comes from systems that are designed to always be &lt;/span&gt;available &lt;span style=&quot;font-weight: 400&quot;&gt;even as some components fail.&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;At a minimum, solution cannot lose data&lt;/li&gt;&lt;li style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;Shard data to reduce impact radius&lt;/li&gt;&lt;li style=&quot;font-size: 12px&quot;&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;must be able to provide access to all data even as servers fail.(&lt;/span&gt;RReplica&lt;span style=&quot;font-weight: 400&quot;&gt;)&lt;/span&gt;&lt;/li&gt;&lt;li style=&quot;font-size: 12px&quot;&gt;&lt;span style=&quot;font-weight: 400&quot;&gt;resilient solution should also be able to continue operations in the face of expected failures (Electing &lt;/span&gt;RR to master&lt;span style=&quot;font-weight: 400&quot;&gt; and continue writes):&amp;nbsp;&lt;/span&gt;&lt;/li&gt;&lt;ul style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;&lt;li&gt;hardware&amp;nbsp;&lt;/li&gt;&lt;li&gt;software upgrades&lt;/li&gt;&lt;li&gt;network updates&amp;nbsp;&lt;/li&gt;&lt;li&gt;service migration&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;methodologies for avoiding single points of failure:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;ul style=&quot;line-height: 60%&quot;&gt;&lt;li style=&quot;line-height: 60%&quot;&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;layering &amp;amp; abstraction&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;Failures will happen all the time, at every level, create system to tackle them.&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;replicating data at lower-levels&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px ; font-weight: 400&quot;&gt;using DNS or load-balancers at a higher-level&lt;/span&gt;&lt;br&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="LPvS2a-wgWfW8XgeyqXS-1">
          <mxGeometry x="630" y="270" width="480" height="950" as="geometry" />
        </mxCell>
        <mxCell id="xLZQy-Xux8lEB82zGkl7-5" value="&lt;h3 style=&quot;text-align: center&quot;&gt;&lt;span&gt;Why SQL&lt;/span&gt;&lt;/h3&gt;&lt;div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Why start with SQL:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;div&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Cloud SQL&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;Up to 624 GB of RAM and 96 CPUs.&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;Up to 30 TB of storage available&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Replication:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span&gt;EAch schema has its own replication deamon, hence parallelism is achived in replication&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;span&gt;Limitations:&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;&lt;span&gt;Up to 30 database per instance&lt;/span&gt;&lt;/li&gt;&lt;li&gt;&lt;span&gt;4 TB per instance&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="LPvS2a-wgWfW8XgeyqXS-1">
          <mxGeometry x="1240" y="220" width="330" height="280" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
